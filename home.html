<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>知行合一，智行天下</title>
    <link rel="stylesheet" type="text/css" href="css/common.css"/>
    <link rel="stylesheet" type="text/css" href="css/slide_show.css"/>
    <script type="text/javascript">
        window.onload = function () {
            // 定义判断添加删除元素class方法
            var hasClass = function (obj, cls) {
                return obj.className.match(new RegExp('(^|\\s)' + cls + '(\\s|$)'))
            };
            var addClass = function (obj, cls) {
                if (!hasClass(obj, cls)) {
                    if (obj.className.length === 0) {
                        obj.className = cls;
                    } else {
                        obj.className += " " + cls;
                    }
                }
            };
            var rvClass = function (obj, cls) {
                if (hasClass(obj, cls)) {
                    var argu = new RegExp('(^|\\s)' + cls + '(\\s|$)');
                    obj.className = obj.className.replace(argu, "");
                }
            };
            //开始
            var prev = document.getElementById("prev"),
                next = document.getElementById("next"),
                imglist = document.getElementById("imglist").getElementsByTagName("div"),
                dot = document.getElementById("slidot").getElementsByTagName("li"),
                n = imglist.length,
                index = 0,
                fade = false;
            // 设置透明度  渐变
            var setOpacity = function (obj, opa) {
                if (obj.filters) {
                    obj.style.filter = "alpha(opacity:" + opa + ")";
                } else {
                    obj.style.opacity = opa / 100;
                }
            };
            var fadeIn = function (obj) {
                fade = true;
                obj.style.visibility = "visible";
                var opa = 0;
                (function func() {
                    if (opa < 100) {
                        opa += 10;
                        setOpacity(obj, opa);
                        setTimeout(func, 20)
                    } else {
                        fade = false;
                    }
                })();
            };
            var fadeOut = function (obj) {
                fade = true;
                var opa = 100;
                (function func() {
                    if (opa > 0) {
                        opa -= 10;
                        setOpacity(obj, opa);
                        setTimeout(func, 30)
                    } else {
                        obj.style.visibility = "hidden";
                    }
                })();
            };

            //  同步点亮小圆点
            function lightdot() {
                for (var i = 0; i < n; i++) {
                    if (hasClass(dot[i], "on")) {
                        rvClass(dot[i], "on");
                        break;
                    }
                }
                addClass(dot[index], "on");
            }

            //  点击切换下一张
            next.onclick = function () {
                if (!fade) {
                    fadeOut(imglist[index]);
                    index++;
                    if (index === n) index = 0;
                    fadeIn(imglist[index]);
                    lightdot();
                }
            };
            //   点击切换上一张
            prev.onclick = function () {
                if (!fade) {
                    fadeOut(imglist[index]);
                    if (index === 0) {
                        index = n;
                    }
                    index--;
                    fadeIn(imglist[index]);
                    lightdot();
                }
            };
            //   圆点控制切换
            for (var i = 0; i < n; i++) {
                dot[i].order = i;
                dot[i].onclick = function () {
                    if (this.order !== index) {
                        fadeOut(imglist[index]);
                        index = this.order;
                        fadeIn(imglist[index]);
                        lightdot();
                    }
                }
            }

            // 自动播放启停
            function play() {
                auto = setTimeout(function () {
                    next.onclick();
                    play();
                }, 3000)
            }

            function stop() {
                clearTimeout(auto)
            }

            play();
            container.onmouseover = stop;
            container.onmouseout = play;
            imglist[0].parentElement.style.height = window.getComputedStyle(imglist[0]).getPropertyValue('height');
        }
    </script>
</head>
<body>
<div class="nav">
    <div class="nav_left"><img src="img/logo.jpg"></div>
    <div class="nav_right">
        <ul>
            <li><a href="#">首页</a></li>
            <li><a href="#">关于智行</a></li>
            <li><a href="#">产品服务</a></li>
            <li><a href="#">新闻资讯</a></li>
            <li><a href="#">客户案例</a></li>
            <li><a href="#">加入智行</a></li>
            <li><a href="#">联系智行</a></li>
        </ul>
    </div>
</div>
<div id="container">
    <div id="imglist">
        <div class="slidpic">
            <a href="img/slide1.jpg" target="_blank"><img src="img/slide1.jpg"/></a>
        </div>
        <div class="slidpic">
            <a href="img/slide2.png" target="_blank"><img src="img/slide2.png"/></a>
        </div>
        <div class="slidpic">
            <a href="img/slide3.jpg" target="_blank"><img src="img/slide3.jpg"/></a>
        </div>
        <div class="slidpic">
            <a href="img/slide4.jpg" target="_blank"><img src="img/slide4.jpg"/></a>
        </div>
        <div class="slidpic">
            <a href="img/slide5.jpg" target="_blank"><img src="img/slide5.jpg"/></a>
        </div>
    </div>
    <div id="buttons">
        <i id="prev"><</i>
        <i id="next">></i>
    </div>
    <ul id="slidot">
        <li class="on"></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>

</body>
</html>